@{
    ViewBag.Title = "TrendPicture";
    
}

<link href="~/Content/Styles/learunui-framework.css" rel="stylesheet" />
<link href="~/Content/Styles/learunui-accordion.css" rel="stylesheet" />
<script src="~/Content/Scripts/jquery/jquery-1.8.2.min.js"></script>
<script src="~/Content/Scripts/learunui-framework.js"></script>
<script src="~/Content/Scripts/jquery.echarts/echarts.js"></script>


<div id="main" style="width: auto;height:400px"></div>

<script type="text/javascript">
    $(document).ready(function () {
        TrendPicture();
    });


    function TrendPicture()
    {
        var X;
        var Y;
        var durl = encodeURI('@Url.Action("GetTrendData", "VerifyPost")?ID=' + GetQuery('id'));
        $.ajax({
            type: "post",
            url: durl,
            async: false,
            success: function (data) {
                var dataA = new Array();
                dataA = data.split("|");

                X = dataA[0].split(",");
                
                Y = dataA[1].split(",");
                //for (var i = 0; i < X.length; i++) {
                //    X[i] = X[i] + "月份";
                //}
            }

        });
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));
        // 指定图表的配置项和数据
        //option = {
        //    tooltip: {
        //        trigger: 'axis',
        //        axisPointer: {            // 坐标轴指示器，坐标轴触发有效
        //            type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
        //        }
        //    },
        //    legend: {
        //        data: ['不良率']
        //    },
        //    grid: {
        //        left: '3%',
        //        right: '4%',
        //        bottom: '10%',
        //        containLabel: true
        //    },
        //    toolbox: {
        //        show: true,
        //        feature: {
        //            mark: { show: true },
        //            dataView: { show: true, readOnly: false },
        //            magicType: { show: true, type: ['bar', 'line'] },
        //            restore: { show: true },
        //            saveAsImage: { show: true }
        //        }
        //    },
        //    calculable: true,
        //    xAxis: [
        //        {
        //            type: 'category',
        //            boundaryGap: false,
        //            data: X,
        //            axisTick: {
        //                alignWithLabel: true
        //            },
        //            axisLabel: {

        //                interval: 0,
        //                rotate: 90,
        //                margin: 8
        //            }
        //        }
        //    ],
        //    yAxis: [
        //        {
        //            type: 'value',
        //            axisLabel: {
        //                show: true,
        //                interval: 'auto',

        //                formatter: '{value} %'

        //            },
        //            show: true  
        //        }
        //    ],
        //    series: [
        //        {
        //            name: '不良率',
        //            type: 'bar',
        //            //stack: '不良率',
        //            data: Y,
        //            itemStyle: { normal: { label: { show: true, position: 'top', formatter: '{c} %' } } }

        //        }
                
        //    ]
        //};

        //// 使用刚指定的配置项和数据显示图表。
        //myChart.setOption(option);


        option = {
            // color: ['#3398DB', '#66CDAA', '#B22222', '#A020F0'],
            color: ['#87CEFF'],
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                    type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                }
            },
            legend: {
                //data: ['班长完成率', '车间主任完成率', '厂长完成率', '车间完成率']
                data: ['不良率']
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: [
                {
                    type: 'category',
                    data: X,
                    axisTick: {
                        alignWithLabel: true
                    },
                    axisLabel: {

                        interval: 0,
                        rotate: 90,
                        margin: 8
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',

                    axisLabel: {
                        show: true,
                        interval: 'auto',

                        formatter: '{value} %'

                    },
                    show: true
                }
            ],
            series: [
               
                {
                    name: '不良率',
                    type: 'bar',
                    data: Y,
                    itemStyle: { normal: { label: { show: true, position: 'top', formatter: '{c}%' } } }
                },
            ]
        };

        myChart.setOption(option);
    }

</script >